define("de_epages/content/inc/megamenu",["jquery","ep","jquery/masonry"],function(e,t){"use strict";return{init:function(a){a=e.extend({letterCount:20,fallbackColumWidth:200,minOffsetLeft:10,menuDelay:500,isEditorMode:!1},a);var i,l,o,n,r,s,d=e(a.selector),c=d.parents(".PropertyContainer"),u=c.width(),m=function(e){if(e&&e.length){var t,i,l,n=e.find(".ep-megamenu-second-level-element").length,r=Math.floor((u-2*a.minOffsetLeft)/o),s=r>n?n*o:r*o,d=c.outerWidth(),m=c.offset().left,p=d+m;e.css({left:"",width:s+"px"}),t=e.outerWidth(!0),i=e.offset().left,l=t+i,i-m<a.minOffsetLeft?e.css({left:a.minOffsetLeft+"px"}):l+a.minOffsetLeft>p&&e.css({left:i-e.offsetParent().offset().left-(l-(p-a.minOffsetLeft))+"px"})}};d.length&&(n=e("<span>").appendTo("body"),n.text("PMWXGOQ").addClass("ep-megamenu-second-level-font-check"),r=Math.floor(n.width()/7),n.remove(),o=r?r*a.letterCount:a.fallbackColumWidth,d.find(".ep-megamenu-second-level-element").css({width:o+"px"}),s=d.children(".ep-megamenu-first-level-element"),d.on("mouseenter",".ep-megamenu-first-level-element",function(){var t,a=e(this),n=a.children(".ep-megamenu-container");n.length&&(t=n.children(".ep-megamenu-second-level-group"),n.clearQueue().queue(function(){var r;l&&l.removeClass("active-item"),l=a,l.addClass("active-item"),i&&i.clearQueue().hide(),i=n,n.show(),t.masonry(),t.children(".ep-megamenu-second-level-element").each(function(){var a,i=e(this),l=i.outerWidth(!0),r=i.outerHeight(!0),s=i.position().top,d=i.find(".ep-megamenu-third-level-element:visible").length,c=n.height(),u=parseInt(n.css("max-height"),10);for(l!==o&&i.css({width:o-(l-o)+"px"}),c=u>c?u:c,t.masonry(),a=0;d>a;a++)s=i.position().top,r+s>c&&(i.find(".ep-megamenu-more").show(),i.find(".ep-megamenu-third-level-element:visible").last().hide(),r=i.outerHeight(!0))}),r=t.height(),r>parseInt(n.css("max-height"),10)&&(n.css({"max-height":r+"px"}),t.masonry())}),m(n))}),d.on("mouseleave",".ep-megamenu-first-level-element",function(){var t=e(this),i=t.children(".ep-megamenu-container");i.clearQueue().delay(a.menuDelay).queue(function(){i.hide(),l&&l.removeClass("active-item")})}),s.each(function(){var t=e(this),a=t.children(".ep-megamenu-container"),i=t.find(".active-marker"),l=t.children("a");i.css({left:l.width()/2-5+"px"}),m(a)}),d.find(".ep-megamenu-second-level-group").masonry({itemSelector:".ep-megamenu-second-level-element",columnWidth:o})),e(".Category-"+t.config.objectId+".NavigationElement").addClass("Active")}}});
//@ sourceMappingURL=megamenu.js.map